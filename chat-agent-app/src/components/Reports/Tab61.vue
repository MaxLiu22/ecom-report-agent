<template>
  <div class="sub-tab-panel">
    <!-- 2.1 æ¬§ç›Ÿå†…éƒ¨ç‰©æµæ–¹æ¡ˆ å†…å®¹å¼€å§‹ -->
    <h2 style="margin: 0 0 16px; font-size: 24px; font-weight: 600; color: #232f3e">
      2.1 æ¬§ç›Ÿå†…éƒ¨ç‰©æµæ–¹æ¡ˆ
    </h2>
    <div class="solution-details">
      <!-- æ¬§ç›Ÿå†…éƒ¨æ–¹æ¡ˆä»‹ç»ä¸å¯¹æ¯” -->
      <div style="margin: 20px 0">
        <!-- <h4 style="color: #333; font-size: 16px; margin: 10px 0">æ¬§æ´²ç«™ç‚¹æ‹“å±•è§£å†³æ–¹æ¡ˆ</h4>
        <h5 style="color: #666; font-size: 14px; margin: 10px 0">æ¬§ç›Ÿå†…éƒ¨ç‰©æµæ–¹æ¡ˆ</h5> -->
        <div
          style="
            margin: 18px 0 24px 0;
            background: #fff;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            box-shadow: 0 4px 14px rgba(0, 0, 0, 0.06);
            position: relative;
            overflow: hidden;
          "
        >
          <div
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              padding: 14px 18px;
              background: #232f3e;
              border-bottom: 1px solid rgba(255, 255, 255, 0.25);
            "
          >
            <span
              style="
                background: rgba(255, 255, 255, 0.25);
                width: 34px;
                height: 34px;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                border-radius: 8px;
                font-size: 18px;
                color: #fff;
                font-weight: 600;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
              "
              >â–¶</span
            >
            <div style="display: flex; flex-direction: column">
              <span style="font-size: 16px; font-weight: 700; color: #fff; letter-spacing: 0.5px"
                >æ¬§ç›Ÿå†…éƒ¨æ–¹æ¡ˆä»‹ç»ä¸å¯¹æ¯”</span
              >
              <span style="font-size: 11px; color: #fff; opacity: 0.9"
                >å¯¹æ¯” EFN ä¸ PanEU å…³é”®å·®å¼‚ï¼Œçªå‡ºæˆæœ¬/é€Ÿåº¦ä¸å‡†å…¥è¦æ±‚</span
              >
            </div>
          </div>
          <div style="padding: 16px 18px 6px 18px">
            <div
              style="
                font-size: 12px;
                color: #555;
                line-height: 1.5;
                margin-bottom: 14px;
                background: #f8f9fa;
                border: 1px solid #ddd;
                padding: 10px 12px;
                border-radius: 8px;
              "
            >
              <strong style="color: #333">è¯´æ˜ï¼š</strong> ä¸‹è¡¨å±•ç¤ºå–å®¶åœ¨ä¸åŒè·¨å›½ fulfillment
              æ¨¡å¼ä¸‹çš„å…¥ä»“ç­–ç•¥ã€æˆæœ¬ç»“æ„ä¸é…é€é€Ÿåº¦å·®å¼‚ï¼Œå¸®åŠ©å¿«é€Ÿåˆ¤æ–­æ˜¯å¦å‡çº§è‡³ PanEUã€‚
            </div>
            <div class="table-container" style="overflow-x: auto; margin: 0 0 16px 0">
              <table
                style="
                  width: 100%;
                  border-collapse: collapse;
                  font-size: 11px;
                  border: 2px solid #ddd;
                  margin-bottom: 15px;
                  background: #fff;
                "
              >
                <thead>
                  <tr>
                    <th
                      rowspan="2"
                      style="
                        background: #232f3e;
                        color: white;
                        padding: 12px 8px;
                        border: 1px solid #ddd;
                        text-align: center;
                        width: 80px;
                      "
                    >
                      æ–¹æ¡ˆç±»å‹
                    </th>
                    <th
                      style="
                        background: #232f3e;
                        color: white;
                        padding: 12px 8px;
                        border: 1px solid #ddd;
                        text-align: center;
                        width: 25%;
                      "
                    >
                      æ¬§ç›Ÿ FBA çš„ç‰©æµæ¨¡å¼
                    </th>
                    <th
                      style="
                        background: #232f3e;
                        color: white;
                        padding: 12px 8px;
                        border: 1px solid #ddd;
                        text-align: center;
                        width: 35%;
                      "
                    >
                      æ¬§ç›Ÿä¹‹é—´çš„è¿œç¨‹é…é€ç½‘ç»œ<br />European Fulfillment Network (EFN)
                    </th>
                    <th
                      style="
                        background: #232f3e;
                        color: white;
                        padding: 12px 8px;
                        border: 1px solid #ddd;
                        text-align: center;
                        width: 35%;
                      "
                    >
                      â­äºšé©¬é€Šç‰©æµæ¬§æ´²æ•´åˆæœåŠ¡<br />Pan European (PanEU)
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td
                      style="
                        background: #f8f9fa;
                        color: #333;
                        font-weight: 600;
                        padding: 10px 8px;
                        border: 1px solid #ddd;
                        text-align: center;
                      "
                    >
                      ç®€ä»‹
                    </td>
                    <td style="padding: 10px 8px; border: 1px solid #ddd; font-size: 10px">
                      å–å®¶å…¥ä»“è‡³æ¬§ç›Ÿä»»ä¸€å›½å®¶åï¼Œå³å¯ç”±æ­¤å›½çš„ä»“åº“è¿œç¨‹é…é€åˆ°å…¶ä»–æ¬§ç›Ÿå›½å®¶
                    </td>
                    <td style="padding: 10px 8px; border: 1px solid #ddd; font-size: 10px">
                      å–å®¶å…¥ä»“è‡³æ¬§ç›Ÿä»»ä¸€å›½å®¶åï¼Œäºšé©¬é€Šå°†è´§å­˜å‚¨åœ¨å–å®¶å¯ç”¨äº†å­˜å‚¨æœåŠ¡çš„å›½å®¶/åœ°åŒºçš„æ¬§ç›Ÿè¿è¥ä¸­å¿ƒå†…ï¼Œå¹¶è‡ªä¸»åœ¨è¿™äº›å–å®¶åœ°åŒºä¹‹é—´åˆ†é…å­˜å‚¨ï¼Œä¸é¢å¤–æ”¶å–è´¹ç”¨
                    </td>
                    <td
                      style="
                        padding: 10px 8px;
                        border: 1px solid #ddd;
                        font-size: 10px;
                        background: #f8f9fa;
                        border-left: 3px solid #333;
                      "
                    >
                      å–å®¶å…¥ä»“è‡³æ¬§ç›Ÿä»»ä¸€å›½å®¶åï¼Œäºšé©¬é€Šå°†è´§å­˜å‚¨åœ¨å–å®¶å¯ç”¨äº†å­˜å‚¨æœåŠ¡çš„å›½å®¶/åœ°åŒºçš„æ¬§ç›Ÿè¿è¥ä¸­å¿ƒå†…ï¼Œå¹¶è‡ªä¸»åœ¨è¿™äº›å–å®¶åœ°åŒºä¹‹é—´åˆ†é…å­˜å‚¨ï¼Œä¸é¢å¤–æ”¶å–è´¹ç”¨
                    </td>
                  </tr>
                  <tr>
                    <td
                      rowspan="2"
                      style="
                        background: #f8f9fa;
                        color: #333;
                        font-weight: 600;
                        padding: 10px 8px;
                        border: 1px solid #ddd;
                        text-align: center;
                      "
                    >
                      åŠ å…¥æ¡ä»¶
                    </td>
                    <td style="padding: 10px 8px; border: 1px solid #ddd; text-align: center">
                      <div style="font-weight: 600; margin-bottom: 5px; font-size: 10px">
                        ASIN è®¾ç½®
                      </div>
                      <div style="font-size: 9px">éœ€ä½¿ç”¨ç›¸åŒ ASIN/FNSKU#</div>
                    </td>
                    <td style="padding: 10px 8px; border: 1px solid #ddd; text-align: center">
                      <div style="font-weight: 600; margin-bottom: 5px; font-size: 10px">
                        ASIN è®¾ç½®
                      </div>
                      <div style="font-size: 9px">éœ€ä½¿ç”¨ç›¸åŒ ASIN/FNSKU#</div>
                    </td>
                    <td style="padding: 10px 8px; border: 1px solid #ddd; text-align: center">
                      <div style="font-weight: 600; margin-bottom: 5px; font-size: 10px">
                        ASIN è®¾ç½®
                      </div>
                      <div
                        style="
                          font-size: 9px;
                          background: #f8f9fa;
                          padding: 4px;
                          border-radius: 3px;
                          border: 1px solid #333;
                        "
                      >
                        å¾·æ³•æ„è¥¿éœ€ä½¿ç”¨ç›¸åŒ ASIN/FNSKU#
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td style="padding: 10px 8px; border: 1px solid #ddd; text-align: center">
                      <div style="font-weight: 600; margin-bottom: 5px; font-size: 10px">
                        ä»“å‚¨å›½è¦æ±‚*
                      </div>
                      <div style="font-size: 9px">ä»…å¼€å¯ä¸€å›½ä»“å‚¨<br />(éœ€è¦1ä¸ª VAT)</div>
                    </td>
                    <td style="padding: 10px 8px; border: 1px solid #ddd; text-align: center">
                      <div style="font-weight: 600; margin-bottom: 5px; font-size: 10px">
                        ä»“å‚¨å›½è¦æ±‚*
                      </div>
                      <div style="font-size: 9px">ä»…å¼€å¯ä¸€å›½ä»“å‚¨<br />(éœ€è¦1ä¸ª VAT)</div>
                    </td>
                    <td style="padding: 10px 8px; border: 1px solid #ddd; text-align: center">
                      <div style="font-weight: 600; margin-bottom: 5px; font-size: 10px">
                        ä»“å‚¨å›½è¦æ±‚*
                      </div>
                      <div
                        style="
                          font-size: 9px;
                          background: #f8f9fa;
                          padding: 4px;
                          border-radius: 3px;
                          border: 1px solid #333;
                        "
                      >
                        éœ€è¦å¾·æ³•æ„è¥¿ä¸­ï¼Œè‡³å°‘å¼€å¯2å›½ä»“å‚¨ï¼ˆè‡³å°‘2ä¸ª VATï¼‰ï¼Œ<br />å¯ç”¨ä»“å‚¨çš„å›½å®¶ä¸ºPanEUï¼Œæœªå¯ç”¨å›½å®¶ä¸º
                        EFN
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td
                      style="
                        background: #f8f9fa;
                        color: #333;
                        font-weight: 600;
                        padding: 10px 8px;
                        border: 1px solid #ddd;
                        text-align: center;
                      "
                    >
                      å¤´ç¨‹ç‰©æµ<br />(CN->EU FBA CC)
                    </td>
                    <td
                      style="
                        padding: 10px 8px;
                        border: 1px solid #ddd;
                        text-align: center;
                        font-size: 10px;
                      "
                    >
                      éœ€å‘è´§è‡³æ¬§ç›ŸæŸ1ä¸ªå›½å®¶ï¼Œæˆæœ¬ä½
                    </td>
                    <td
                      style="
                        padding: 10px 8px;
                        border: 1px solid #ddd;
                        text-align: center;
                        font-size: 10px;
                      "
                    >
                      éœ€å‘è´§è‡³æ¬§ç›ŸæŸ1ä¸ªå›½å®¶ï¼Œæˆæœ¬ä½
                    </td>
                    <td
                      style="
                        padding: 10px 8px;
                        border: 1px solid #ddd;
                        text-align: center;
                        font-size: 10px;
                      "
                    >
                      éœ€å‘è´§è‡³æ¬§ç›ŸæŸ1ä¸ªå›½å®¶ï¼Œæˆæœ¬ä½
                    </td>
                  </tr>
                  <tr>
                    <td
                      style="
                        background: #f8f9fa;
                        color: #333;
                        font-weight: 600;
                        padding: 10px 8px;
                        border: 1px solid #ddd;
                        text-align: center;
                      "
                    >
                      å°¾ç¨‹é…é€<br />(FBA)
                    </td>
                    <td
                      style="
                        padding: 10px 8px;
                        border: 1px solid #ddd;
                        text-align: center;
                        font-size: 10px;
                      "
                    >
                      <span
                        style="
                          background: #f8f9fa;
                          color: #333;
                          border: 1px solid #333;
                          padding: 2px 6px;
                          border-radius: 12px;
                          font-size: 9px;
                          margin: 2px;
                        "
                        >è·¨å¢ƒé…é€</span
                      >ï¼šè´¹ç”¨é«˜ï¼Œ3-5å¤©é€è¾¾
                    </td>
                    <td
                      style="
                        padding: 10px 8px;
                        border: 1px solid #ddd;
                        text-align: center;
                        font-size: 10px;
                      "
                    >
                      <span
                        style="
                          background: #f8f9fa;
                          color: #333;
                          border: 1px solid #333;
                          padding: 2px 6px;
                          border-radius: 12px;
                          font-size: 9px;
                          margin: 2px;
                        "
                        >æœ¬åœ°é…é€</span
                      >ï¼šè´¹ç”¨èŠ‚çº¦é«˜è¾¾53%ï¼Œ1-2å¤©é€è¾¾<br /><span
                        style="
                          background: #f8f9fa;
                          color: #333;
                          border: 1px solid #333;
                          padding: 2px 6px;
                          border-radius: 12px;
                          font-size: 9px;
                          margin: 2px;
                        "
                        >è·¨å¢ƒé…é€</span
                      >+<span
                        style="
                          background: #f8f9fa;
                          color: #333;
                          border: 1px solid #333;
                          padding: 2px 6px;
                          border-radius: 12px;
                          font-size: 9px;
                          margin: 2px;
                        "
                        >è·¨å¢ƒé…é€</span
                      >
                    </td>
                    <td
                      style="
                        padding: 10px 8px;
                        border: 1px solid #ddd;
                        text-align: center;
                        font-size: 10px;
                      "
                    >
                      <span
                        style="
                          background: #f8f9fa;
                          color: #333;
                          border: 1px solid #333;
                          padding: 2px 6px;
                          border-radius: 12px;
                          font-size: 9px;
                          margin: 2px;
                        "
                        >æœ¬åœ°é…é€</span
                      >+<span
                        style="
                          background: #f8f9fa;
                          color: #333;
                          border: 1px solid #333;
                          padding: 2px 6px;
                          border-radius: 12px;
                          font-size: 9px;
                          margin: 2px;
                        "
                        >è·¨å¢ƒé…é€</span
                      >
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div style="display: flex; flex-wrap: wrap; gap: 12px; margin: 4px 0 10px 0">
              <div
                style="
                  flex: 1 1 240px;
                  background: #f1f5f9;
                  border: 1px solid #d8e0e8;
                  padding: 10px 12px;
                  border-radius: 8px;
                  font-size: 11px;
                  line-height: 1.5;
                "
              >
                <strong style="color: #334155">ä½•æ—¶é‡‡ç”¨ EFNï¼š</strong><br />å•ä¸€ä»“å‚¨æ—©æœŸè¯•æ°´é˜¶æ®µ /
                SKU è§„æ¨¡è¾ƒå°‘ / èµ„é‡‘å ç”¨éœ€æ§åˆ¶ã€‚
              </div>
              <div
                style="
                  flex: 1 1 240px;
                  background: #f8f9fa;
                  border: 1px solid #ddd;
                  padding: 10px 12px;
                  border-radius: 8px;
                  font-size: 11px;
                  line-height: 1.5;
                "
              >
                <strong style="color: #333">å‡çº§ PanEU ä¿¡å·ï¼š</strong><br />å¤šå›½å·²æœ‰è‡ªç„¶å‡ºå• +
                è·¨å¢ƒé…é€è´¹å æ¯”é«˜ + æ ¸å¿ƒ ASIN åº“å­˜æ³¢åŠ¨å¯¼è‡´è½¬åŒ–ä¸‹æ»‘ã€‚
              </div>
              <div
                style="
                  flex: 1 1 240px;
                  background: #e6f7ff;
                  border: 1px solid #b3e3ff;
                  padding: 10px 12px;
                  border-radius: 8px;
                  font-size: 11px;
                  line-height: 1.5;
                "
              >
                <strong style="color: #075985">æ”¶ç›Šç»“æ„ï¼š</strong><br />å±¥çº¦è´¹èŠ‚çº¦ + é…é€æ—¶æ•ˆæå‡ â†’
                è½¬åŒ–æå‡ + åº“å­˜åˆ†å¸ƒæ™ºèƒ½åŒ–é™ä½ç¼ºè´§é£é™©ã€‚
              </div>
            </div>
          </div>
        </div>
        <!-- PanEU æˆæœ¬èŠ‚çº¦ -->
        <div
          style="
            margin-top: 20px;
            padding: 20px;
            background: #ffffff;
            border: 1px solid #ddd;
            border-radius: 6px;
          "
        >
          <h5
            style="
              color: #333;
              font-size: 14px;
              font-weight: 600;
              margin: 0 0 15px 0;
              padding-bottom: 8px;
              border-bottom: 2px solid #333;
            "
          >
            å¯ç”¨PanEUå›½å®¶ä»“å‚¨è·å¾—é…é€è´¹ç”¨èŠ‚çº¦
          </h5>
          <div v-if="panEUResult && panEUResult.cost_save">

            <table
              style="
                width: 100%;
                border-collapse: collapse;
                font-size: 10px;
                background: #ffffff;
                border: 1px solid #ddd;
                border-radius: 4px;
                margin-bottom: 10px;
              "
            >
              <thead>
                <tr>
                  <th
                    style="
                      background: #333;
                      color: white;
                      font-weight: 600;
                      padding: 10px 8px;
                      text-align: center;
                      border-right: 1px solid #555;
                      font-size: 9px;
                    "
                  >
                    è·¨å¢ƒé…é€å›½å®¶
                  </th>
                  <th
                    style="
                      background: #333;
                      color: white;
                      font-weight: 600;
                      padding: 10px 8px;
                      text-align: center;
                      border-right: 1px solid #555;
                      font-size: 9px;
                    "
                  >
                    é¢„è®¡å¯èŠ‚çº¦è´¹ç”¨(RMB)
                  </th>
                  <th
                    style="
                      background: #333;
                      color: white;
                      font-weight: 600;
                      padding: 10px 8px;
                      text-align: center;
                      border-right: 1px solid #555;
                      font-size: 9px;
                    "
                  >
                    é¢„è®¡èŠ‚çº¦é…é€è´¹(RMB)
                  </th>
                  <th
                    style="
                      background: #333;
                      color: white;
                      font-weight: 600;
                      padding: 10px 8px;
                      text-align: center;
                      border-right: 1px solid #555;
                      font-size: 9px;
                    "
                  >
                    ç”³è¯·VATæ‰€éœ€è´¹ç”¨(RMB)
                  </th>
                  <th
                    style="
                      background: #333;
                      color: white;
                      font-weight: 600;
                      padding: 10px 8px;
                      text-align: center;
                      font-size: 9px;
                    "
                  >
                    ç”³è¯·VATæ‰€éœ€æ—¶é—´
                  </th>
                </tr>
              </thead>
              <tbody>
                  <!-- éå†æ¯ä¸ªå›½å®¶ -->
                  <tr v-for="countryObj in panEUResult.cost_save.value" :key="Object.keys(countryObj)[0]">
                    <td
                      style="background: #f8f9fa; color: #333; font-weight: 600; padding: 8px; border: 1px solid #ddd; text-align: center;"
                    >
                      {{ Object.keys(countryObj)[0] }}
                    </td>
                    <td
                      style="color: #333; font-weight: 500; padding: 8px; border: 1px solid #ddd; text-align: center;"
                    >
                      {{ formatNumber(Object.values(countryObj)[0][0]) }}
                    </td>
                    <td
                      style="color: #333; font-weight: 500; padding: 8px; border: 1px solid #ddd; text-align: center;"
                    >
                      {{ formatNumber(Object.values(countryObj)[0][1]) }}
                    </td>
                    <td
                      style="color: #333; font-weight: 500; padding: 8px; border: 1px solid #ddd; text-align: center;"
                    >
                      {{ formatNumber(Object.values(countryObj)[0][2]) }}
                    </td>
                    <td
                      style="color: #333; font-size: 9px; padding: 8px; border: 1px solid #ddd; text-align: center;"
                    >
                      {{ Object.values(countryObj)[0][3] }}
                    </td>
                  </tr>

                  <!-- æ€»é¢è¡Œ -->
                  <tr>
                    <td
                      style="background: #f1f3f5; color: #222; font-weight: 700; padding: 8px; border: 1px solid #ddd; text-align: center;"
                    >
                      æ€»é¢
                    </td>
                    <td
                      v-for="(item, idx) in panEUResult.cost_save['æ€»é¢']"
                      :key="idx"
                      style="color: #222; font-weight: 600; padding: 8px; border: 1px solid #ddd; text-align: center;"
                    >
                      {{ item === '-' ? '-' : formatNumber(item) }}
                    </td>
                  </tr>

              </tbody>
            </table>


          </div>
          <div v-else style="text-align: center; padding: 20px; color: #999">æš‚æ— æˆæœ¬èŠ‚çº¦æ•°æ®</div>
        </div>
        <!-- å•†å“èµ„æ ¼è¯´æ˜ -->
        <div
          style="
            margin-top: 20px;
            padding: 20px;
            background: #ffffff;
            border: 1px solid #ddd;
            border-radius: 6px;
          "
        >
          <div style="display: flex; align-items: center; margin-bottom: 15px; gap: 8px">
            <span style="color: #333; font-size: 16px; font-weight: bold">â–¶</span>
            <h4 style="color: #333; font-size: 16px; font-weight: 600; margin: 0">
              PanEUå•†å“èµ„æ ¼è¦æ±‚
            </h4>
          </div>
          <p style="color: #333; font-size: 13px; line-height: 1.5; margin: 0 0 15px 0">
            å•†å“å¿…é¡»ç¬¦åˆåœ¨æ¬§æ´²å„å›½ä¹‹é—´è¿è¾“æµè½¬çš„è¦æ±‚ï¼Œä»¥ä¸‹åˆ—å‡ºä¸ç¬¦åˆPanEUçš„å•†å“ç§ç±»ï¼š
          </p>
          <table
            style="
              width: 100%;
              border-collapse: collapse;
              font-size: 11px;
              background: #ffffff;
              border: 1px solid #ddd;
            "
          >
            <thead>
              <tr>
                <th
                  style="
                    background: #333;
                    color: white;
                    font-weight: 600;
                    padding: 12px 10px;
                    text-align: center;
                    border-right: 1px solid #555;
                    width: 15%;
                  "
                >
                  ç±»ç›®
                </th>
                <th
                  style="
                    background: #333;
                    color: white;
                    font-weight: 600;
                    padding: 12px 10px;
                    text-align: center;
                    border-right: 1px solid #555;
                    width: 35%;
                  "
                >
                  ä¸¾ä¾‹
                </th>
                <th
                  style="
                    background: #333;
                    color: white;
                    font-weight: 600;
                    padding: 12px 10px;
                    text-align: center;
                    width: 50%;
                  "
                >
                  åŸå› 
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td
                  style="
                    background: #f8f9fa;
                    color: #333;
                    font-weight: 600;
                    text-align: center;
                    padding: 10px;
                    border: 1px solid #ddd;
                  "
                >
                  é£Ÿå“<br />Food
                </td>
                <td style="color: #333; font-size: 10px; padding: 10px; border: 1px solid #ddd">
                  ä¸€èˆ¬äººç±»é£Ÿå“ã€é£Ÿå“è¡¥å……å‰‚ã€å©´å„¿é£Ÿå“
                </td>
                <td style="color: #555; font-size: 10px; padding: 10px; border: 1px solid #ddd">
                  æ¬§ç›Ÿæ³•è§„(åŒ…æ‹¬EUI0ç­‰)è¦æ±‚é£Ÿå“å¿…é¡»æœ‰å½“åœ°è¯­è¨€æ ‡ç­¾ã€‚<br />
                  ç”±äºç›®å‰æ— æ³•ç¡®ä¿è§„æ¨¡åˆè§„ï¼Œæ‰€æœ‰é£Ÿå“(æ›´å¹¿ä¹‰ä¸Šçš„å¯é£Ÿç”¨å“)é»˜è®¤è¢«æ’é™¤åœ¨æ³›æ¬§é”€å”®ä¹‹å¤–ã€‚<br />
                  å«é¦†é¥®æ–™ã€é…’å¾…å’ŒåŠ å•¡å› é¢å¤–ç¨æ”¶è¦æ±‚è€Œè¢«æ’é™¤
                </td>
              </tr>
              <tr style="background: #f8f9fa">
                <td
                  style="
                    background: #f8f9fa;
                    color: #333;
                    font-weight: 600;
                    text-align: center;
                    padding: 10px;
                    border: 1px solid #ddd;
                  "
                >
                  å­ç±»åˆ«äº§å“<br />Subcat
                </td>
                <td style="color: #333; font-size: 10px; padding: 10px; border: 1px solid #ddd">
                  åŒ»ç–—è®¾å¤‡ã€å©´å„¿æ±½è½¦åº§æ¤…(ä»…é™è‹±å›½)ã€BBæª/æ°”æª/å½©å•æªã€è‡ªç”µå­çƒŸé…ä»¶ã€åŒ–è‚¥ã€å®¶å…·(ä»…é™ç¾å›½)ã€ç‡ƒæ°”çƒ§çƒ¤ç‚‰ã€ç¤¼å“å¡ã€ç”¨è¯å“ã€å® ç‰©è¯å“ã€æœºæ²¹ã€é‡‘åˆšçŸ³åˆ‡åˆ¶ç‰‡
                </td>
                <td style="color: #555; font-size: 10px; padding: 10px; border: 1px solid #ddd">
                  æ¬§ç›Ÿå›½å®¶æ³•å¾‹å·®å¼‚éæœ¬åœ°åº“å­˜å¯èƒ½å¸¦æ¥å®¶å…¨å’Œå®¢æˆ·ä¿¡ä»»/å…¬å…³é£é™©ï¼Œç›®æ— å¯æ‰©å±•æœºåˆ¶ç¡®ä¿ç¬¦åˆç›¸å…³å›½å†…è¦æ±‚
                </td>
              </tr>
              <tr>
                <td
                  style="
                    background: #f8f9fa;
                    color: #333;
                    font-weight: 600;
                    text-align: center;
                    padding: 10px;
                    border: 1px solid #ddd;
                  "
                >
                  å±é™©å“<br />Hazmat
                </td>
                <td style="color: #333; font-size: 10px; padding: 10px; border: 1px solid #ddd">
                  æ¸…æ´å‰‚ã€åŒ»ç–—è®¾å¤‡ã€åŒ–è‚¥ã€è¡£è¯ã€ç²˜åˆå‰‚ã€å®³è™«æ§åˆ¶è®¾å¤‡
                </td>
                <td style="color: #555; font-size: 10px; padding: 10px; border: 1px solid #ddd">
                  æ— æ³•å¤§è§„æ¨¡éªŒè¯REACH/CLPåˆè§„æ€§ï¼ŒåŒ…æ‹¬å¤šè¯­è¨€å®‰å…¨æ•°æ®è¡¨å’Œæœ¬åœ°è¯­è¨€æ ‡ç­¾è¦æ±‚
                </td>
              </tr>
              <tr style="background: #f8f9fa">
                <td
                  style="
                    background: #f8f9fa;
                    color: #333;
                    font-weight: 600;
                    text-align: center;
                    padding: 10px;
                    border: 1px solid #ddd;
                  "
                >
                  ç‰©ç†ç‰¹æ€§<br />physical(H&B)
                </td>
                <td style="color: #333; font-size: 10px; padding: 10px; border: 1px solid #ddd">
                  é‡å‹éåˆ†ç±»ã€è½»å‹å¤§ä»¶ã€çœŸæ­£é‡å‹å¤§ä»¶
                </td>
                <td style="color: #555; font-size: 10px; padding: 10px; border: 1px solid #ddd">
                  æˆæœ¬å’Œè¿è¾“çœ¼åˆ¶æ’é™¤é‡å‹å¤§ä»¶ç‰©å“ï¼Œæ ‡å‡†å› å›½å®¶è€Œå¼‚(å¦‚è·å…°å‘¨é•¿>300cmï¼Œå…¶ä»–>360cm)
                </td>
              </tr>
              <!-- <tr>
                <td
                  style="
                    background: #f8f9fa;
                    color: #333;
                    font-weight: 600;
                    text-align: center;
                    padding: 10px;
                    border: 1px solid #ddd;
                  "
                >
                  ç£é“ç±»å‹ç±»<br />å¸¦ç£æ€§å…ƒå™¨ä»¶
                </td>
                <td style="color: #333; font-size: 10px; padding: 10px; border: 1px solid #ddd">
                  æ¶ˆç£ç±»åŠŸèƒ½ã€åŒ–æ„Ÿç±»ã€é«˜çµä»¶å·¥å‚
                </td>
                <td style="color: #555; font-size: 10px; padding: 10px; border: 1px solid #ddd">
                  éœ€è¦è¾¾é™…åˆ°å•†åŠ¡è®¤è¯å’Œç›¸å…³è¯ä¹¦ï¼Œæ ‡è¯†è¦ç¬¦å·ç­‰äºäº§å“åŠŸæ•ˆç°å®å®šä¹‰ï¼Œå¸¦ç£ç±»ç‰©<br />å—é™ï¼Œå•†å…³å’Œæ¬§ç›Ÿç­‰ç»è¥äº§å“åŠŸç­‰æœŸæ•ˆæœŸå¹³<300å…‹ï¼Œé«˜åº¦<360mm
                </td>
              </tr> -->
            </tbody>
          </table>
        </div>
        <!-- åˆè§„é£é™©å›¾ç‰‡
        <div style="margin-top: 20px; padding: 20px; background: #ffffff; border: 1px solid #ddd; border-radius: 6px;">
          <div style="text-align: center;">
            <img src="/src/assets/åˆè§„é£é™©.jpg" alt="åˆè§„é£é™©" style="width: 100%; max-width: 1200px; height: auto; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);" />
          </div>
        </div> -->
      </div>
    </div>
    <!-- å†…å®¹ç»“æŸ -->
    <!-- PanEU åˆ†æç»“æœï¼ˆè¿½åŠ å±•ç¤ºï¼‰ -->
    <div class="analysis-section" style="margin-top: 32px" v-if="panEUResult">
      <div class="section-header">
        <h3 style="margin: 0">ğŸŒ PanEU åˆ†æç»“æœ</h3>
        <p class="section-description" style="margin: 6px 0 0">æ¬§æ´²æ³›æ¬§è®¡åˆ’æœºä¼šåˆ†æè¯¦æƒ…</p>
      </div>
      <div class="section-content">
        <div>
          <!-- <h4 style="color: #333; font-size: 16px; margin: 10px 0" v-if="panEUResult.report_title">
            {{ panEUResult.report_title }}
          </h4>
          <p
            style="color: #666; font-size: 14px; margin: 10px 0"
            v-if="panEUResult.report_subtitle"
          >
            {{ panEUResult.report_subtitle }}
          </p> -->
          <div v-if="panEUResult.excel_data" style="margin: 20px 0">
            <h5 style="color: #333; font-size: 14px; margin-bottom: 15px">PanEU ASIN æœºä¼šæ¦‚è§ˆ</h5>
            <div style="overflow-x: auto">
              <table
                style="
                  width: 100%;
                  border-collapse: collapse;
                  font-size: 12px;
                  background: #ffffff;
                  border: 1px solid #ddd;
                  border-radius: 4px;
                "
              >
                <thead>
                  <tr>
                    <th
                      v-for="header in panEUResult.excel_data.headers.slice(0, 4)"
                      :key="header"
                      style="
                        background: #333;
                        color: white;
                        padding: 12px 8px;
                        text-align: center;
                        border-right: 1px solid #555;
                      "
                    >
                      {{ header }}
                    </th>
                  </tr>
                </thead>

                <tbody>
                  <tr v-for="(row, idx) in panEUResult.excel_data.rows" :key="idx">
                    <td
                      :rowspan="parseInt(1)"
                      :style="{
                        background: '#f8f9fa',
                        fontWeight: 600,
                        textAlign: 'center',
                        padding: '8px',
                        border: '1px solid #ddd',
                        paddingLeft: (row.indentLevel || 0) * 20 + 'px',
                        width: '140px' 
                      }"
                    >
                      {{ row.metric }}
                    </td>
                    <td
                      style="text-align: center; border: 1px solid #ddd; cursor: pointer; color: orange; font-weight: bold;"
                      @click="openDetail(row)"
                    >
                      {{ row.count }}
                    </td>
                    <td
                      v-if="row.operationPoint"
                      :rowspan="parseInt(row.operationPointRowspan || 1)"
                      v-html="row.operationPoint"
                      style="text-align: left; border: 1px solid #ddd; padding: 8px; color: #555;"
                    ></td>
                    <td
                      v-if="row.action"
                      :rowspan="parseInt(row.actionRowspan || 1)"
                      v-html="row.action"
                      style="text-align: left; border: 1px solid #ddd; padding: 8px; color: #007bff;"
                    ></td>
                  </tr>
                </tbody>


              </table>



            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="analysis-section" v-else style="margin-top: 32px">
      <div class="section-header">
        <h3 style="margin: 0">ğŸŒ PanEU åˆ†æç»“æœ</h3>
      </div>
      <div class="section-content" style="text-align: center; color: #999; font-size: 13px">
        æš‚æ—  PanEU åˆ†ææ•°æ®
      </div>
    </div>
  </div>



  <!-- è¯¦æƒ…å¼¹çª—ï¼ˆè‡ªé€‚åº”é«˜åº¦ï¼Œå†…éƒ¨æ»šåŠ¨ï¼‰ -->
  <div v-if="showDialog" class="modal-overlay" @click.self="closeDialog">
    <div class="modal-container" role="dialog" aria-modal="true">
      <div class="modal-header">
        <h3>è¯¦ç»†æ•°æ®</h3>
        <button class="modal-close" @click="closeDialog" aria-label="å…³é—­">Ã—</button>
      </div>

      <div class="modal-body">
        <!-- å±•ç¤º row.data è¡¨æ ¼ -->
        <table class="detail-table">
          <thead>
            <tr>
              <th>ASIN</th>
              <th>Title</th>
              <th>Status</th>
              <th>DE</th>
              <th>FR</th>
              <th>IT</th>
              <th>ES</th>
              <th>NL</th>
            </tr>
          </thead>
          <tbody>
            <tr v-for="(item, i) in currentRowData" :key="i">
              <td>{{ item.asin }}</td>
              <td>{{ item.title }}</td>
              <td>{{ item.status }}</td>
              <td>{{ item.DE }}</td>
              <td>{{ item.FR }}</td>
              <td>{{ item.IT }}</td>
              <td>{{ item.ES }}</td>
              <td>{{ item.NL }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- <div class="modal-footer">
        <button class="primary" @click="closeDialog">å…³é—­</button>
      </div> -->
    </div>
  </div>

</template>
<script>
export default {
  name: 'Tab61',
  props: {
    panEUResult: { type: Object, default: null },
  },
  data() {
    return {
      showDialog: false,
      currentRowData: []
    }
  },
  mounted() {
    window.addEventListener('keydown', this.onKeydown)
  },
  unmounted() {
    window.removeEventListener('keydown', this.onKeydown)
  },
  methods: {
    // æ ¼å¼åŒ–æ•°å­—ï¼Œæ·»åŠ åƒä½åˆ†éš”ç¬¦
    formatNumber(num) {
      if (typeof num !== 'number') return num
      return num.toLocaleString('zh-CN', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
      })
    },

    openDetail(row) {
      if (row.data && row.data.length > 0) {
        this.currentRowData = row.data
        this.showDialog = true
      }
    },
    closeDialog() {
      this.showDialog = false
    }

    ,onKeydown(e) {
      if (this.showDialog && (e.key === 'Escape' || e.key === 'Esc')) {
        this.closeDialog()
      }
    }



  },
}
</script>
<style scoped>
.sub-tab-panel {
  background: #fff;
  padding: 24px;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
}
.sub-tab-panel h2 {
  margin: 0 0 12px;
  font-size: 22px;
  color: #232f3e;
}
.sub-tab-panel p {
  margin: 0;
  font-size: 14px;
  line-height: 1.6;
  color: #444;
}
.analysis-section {
  background: #ffffff;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  overflow: hidden;
}
.analysis-section + .analysis-section {
  margin-top: 24px;
}
.analysis-section .section-header {
  background: #f8f9fa;
  padding: 18px 20px;
  border-bottom: 1px solid #e0e0e0;
}
.analysis-section .section-header h3 {
  font-size: 18px;
  font-weight: 600;
  color: #232f3e;
  margin: 0;
}
.analysis-section .section-description {
  font-size: 13px;
  color: #232f3e;
}
.analysis-section .section-content {
  padding: 20px 24px;
}

/* Modal styles */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px; /* ä¿è¯å°å±ä¹Ÿæœ‰å†…è¾¹è· */
}

.modal-container {
  background: #fff;
  width: min(1100px, 100%);
  max-width: 95vw;
  border-radius: 10px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  display: flex;
  flex-direction: column;
  max-height: 90vh; /* å…³é”®ï¼šä¸ä¼šè¶…è¿‡è§†å£é«˜åº¦ */
  overflow: hidden; /* ç”± body è´Ÿè´£æ»šåŠ¨ */
}

.modal-header {
  position: sticky;
  top: 0;
  background: #fff;
  border-bottom: 1px solid #eee;
  padding: 12px 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  z-index: 1;
}

.modal-header h3 {
  margin: 0;
  font-size: 16px;
}

.modal-close {
  border: none;
  background: transparent;
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
  color: #666;
}

.modal-body {
  overflow: auto; /* å…³é”®ï¼šå†…éƒ¨æ»šåŠ¨ */
  padding: 12px 16px;
}

.modal-footer {
  position: sticky;
  bottom: 0;
  background: #fff;
  border-top: 1px solid #eee;
  padding: 10px 16px;
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}

.modal-footer .primary {
  padding: 6px 12px;
  background: #007bff;
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.detail-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
  border: 1px solid #ddd;
}

.detail-table th,
.detail-table td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: left;
  white-space: nowrap;
}

.detail-table thead th {
  position: sticky;
  top: 0; /* è·Ÿéš modal-body æ»šåŠ¨ */
  background: #fafafa;
  z-index: 1;
}
</style>
